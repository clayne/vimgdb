# vim: set filetype=python

define _vimgdb
if $argc >= 1
    set $_vimgdb_option = "$arg0"
else
    set $_vimgdb_option = "vimgdb init option"
end

python

try:
    from vimgdb import Vimgdb
    import cProfile, pstats

    profile = cProfile.Profile()
    profile.enable()

    vimgdb = Vimgdb()
    vimgdb.Synchronize()

    profile.disable()
    profile.create_stats()
    stats = pstats.Stats(profile)
    stats.sort_stats('time','cumulative')
    stats.print_stats(10)

except ImportError as e:
    print("exception: ",str(e))
    import sys
    print("Python version :","{0}.{1}.{2}".format(sys.version_info.major,sys.version_info.minor,sys.version_info.micro))
    print("Search paths   :",sys.path)


end
end

alias vim = _vimgdb

define hookpost-break
    _vimgdb breakpoints
end

define hookpost-clear
    _vimgdb breakpoints
end

define hookpost-delete
    _vimgdb breakpoints
end

define hook-stop
    _vimgdb
end

define hookpost-up
    _vimgdb
end

define hookpost-down
    _vimgdb
end

